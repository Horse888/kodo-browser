<form class="form-horizontal" name="form1" ng-submit="onSubmit(form1)">
  <div class="modal-header">
    <button type="button" class="close" ng-click="close()">
      <span aria-hidden="true">&times;</span>
    </button>
    <h4 class="modal-title text-info">
      <i class="fa fa-edit"></i>
      <!-- 设置存储类型 -->
      {{'updateStorageClass.title'|translate}}
    </h4>
  </div>
  <div class="modal-body">

    <div class="form-group">
      <div class="col-sm-12 pdt4">{{'updateStorageClass.text1'|translate}}</div>
    </div>

   <div ng-if="step==1">
    <div class="text-info">
      <!-- 将修改以下目录或文件 -->
      {{'updateStorageClassModal.message1'|translate}}:
    </div>
    <ul style="max-height: 300px; overflow: auto;">
      <li ng-repeat="item in items" class="break">
        <i class="fa fa-folder" style="color:orange" ng-if="item.itemType === 'folder'"></i>
        <i class="fa fa-file" ng-if="item.itemType !== 'folder'"></i>
        {{item.name}}
      </li>
    </ul>
    <div class="form-group">
      <div class="form-group">
        <label class="col-sm-2 control-label">
          <!-- * 修改为: -->
          * {{'updateStorageClass.setTo'|translate}}:
        </label>
        <div class="col-sm-10">
          <div ng-repeat="option in storageClassOptions">
            <label class="radio">
              <input type="radio" name="storageClassOption" ng-model="updateStorageClassFormData.storageClassKodoName" value="{{option.kodoName}}">
              {{option.nameI18n|i18n}}
            </label>
          </div>
        </div>
      </div>
      <div class="form-group">
        <div class="col-sm-offset-2 col-sm-9" style="font-size: 0.8em;">
          {{uploadConfirmFormHelper.storageClassBilling|i18n}}
        </div>
      </div>
      <div class="clearfix"></div>
    </div>
   </div>

   <div ng-if="step==2">
    <div class="text-info">
      <!-- 正在修改... -->
      {{'updateStorageClass.on'|translate}}
    </div>
   </div>

   <div ng-if="step==2 || step==3">
    <div class="progress mgb2">
     <div class="progress-bar progress-bar-success" ng-style="{width: progress.current*100/progress.total+'%'}">
     </div>
     <div class="progress-bar progress-bar-danger" ng-style="{width: progress.errorCount*100/progress.total+'%'}">
     </div>
    </div>
    <label>{{progress.current}} / {{progress.total}}</label>
  </div>

  <div ng-if="step==3">


    <div ng-if='terr && terr.length>0'>
      <div ng-if="isStop" class="text-danger">
        <!-- 用户取消修改 -->
        {{'updateStorageClassModal.message2'|translate}}
      </div>
      <div class="text-warning">
        <!-- 部分目录或文件无法修改 -->
        {{'updateStorageClassModal.message3'|translate}}:
      </div>
      <ul>
        <li class="break" ng-repeat="terrItem in terr" ng-if="$index<10">

          <i class="fa fa-file-o"></i>

          {{terrItem.item.path.toString().substring(currentInfo.key.length)}}

          <i class="fa fa-exclamation-circle text-danger"
          uib-tooltip="{{terrItem.error.translated_message||terrItem.error.message||terrItem.error.code}}"
          tooltip-placement="right" tooltip-append-to-body="true"></i>
        </li>
        <li ng-if="terr.length > 10">...</li>

      </ul>
    </div>

    <div ng-if='!terr || terr.length==0' class="text-success">
     <i class="fa fa-check text-success"></i>
       <!-- 修改存储类型成功 -->
       {{'updateStorageClass.success'|translate}}
    </div>
 </div>



    <div class="clearfix"></div>
  </div>
  <div class="modal-footer">
    <button ng-if="step==1" type="submit" class="btn btn-success btn-sm">
      <i class="glyphicon glyphicon-ok"></i>
      <!-- 确定 -->
      {{'ok'|translate}}
    </button>

    <button ng-if="step==2" ng-disabled="isStop" type="button" class="btn btn-warning btn-sm" ng-click="stop()">
      <i class="glyphicon glyphicon-remove"></i>
      <!-- 停止 -->
      {{'stop'|translate}}
    </button>

    <button ng-if="step==3||step==1" type="button" class="btn btn-default btn-sm" ng-click="close()">
      <i class="glyphicon glyphicon-remove"></i>
      <!-- 关闭 -->
      {{'close'|translate}}
    </button>
  </div>
</form>
