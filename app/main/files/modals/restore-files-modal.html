<form class="form-horizontal" name="form1" ng-submit="onSubmit(form1)">
  <div class="modal-header">
    <button type="button" class="close" ng-click="close()">
      <span aria-hidden="true">&times;</span>
    </button>
    <h4 class="modal-title text-info">
      <!-- 恢复 -->
      {{'restore.title'|translate}}
    </h4>
  </div>
  <div class="modal-body">

   <div ng-if="step==1" style="max-height: 500px; overflow-y: auto;">
    <div class="text-info">
      <!-- 将解冻以下目录或文件: -->
      {{'restoreModal.message1'|translate}}:
    </div>
    <ul>
      <li ng-repeat="item in items" class="break">
        <i class="fa fa-folder" style="color:orange" ng-if="item.itemType === 'folder'"></i>
        <i class="fa fa-file" ng-if="item.itemType !== 'folder'"></i>
        {{item.name}}
      </li>
    </ul>
    <div class="form-group">
      <label class="col-sm-2 control-label" for="days">
        <!-- 解冻天数: -->
        {{'restore.days'|translate}}:
      </label>
      <div class="col-sm-8">
        <select class="form-control" style="width: 50%;" id="days" name="days" ng-model="info.days" autocomplete="off" autofocus ng-options="day for day in [1,2,3,4,5,6,7]"></select>
      </div>

      <div class="clearfix"></div>
    </div>
   </div>

   <div ng-if="step==2">
    <div class="text-info">
      <!-- 提交中... -->
      {{'restore.on'|translate}}
    </div>
   </div>

   <div ng-if="step==2 || step==3">
    <div class="progress mgb2">
     <div class="progress-bar progress-bar-success" ng-style="{width: progress.current*100/progress.total+'%'}">
     </div>
     <div class="progress-bar progress-bar-danger" ng-style="{width: progress.errorCount*100/progress.total+'%'}">
     </div>
    </div>
    <label>{{progress.current}} / {{progress.total}}</label>
  </div>

  <div ng-if="step==3">


    <div ng-if='terr && terr.length>0'>
      <div ng-if="isStop" class="text-danger">
        <!-- 用户取消解冻 -->
       {{'restoreModal.message2'|translate}}
      </div>
      <div class="text-warning">
        <!-- 部分目录或文件无法解冻 -->
        {{'restoreModal.message3'|translate}}
      </div>
      <ul>
        <li ng-repeat="terrItem in terr" ng-if="$index<10">

          <i class="fa fa-file-o"></i>

          {{terrItem.item.key.substring(currentInfo.key.length)}}

          <i class="fa fa-exclamation-circle text-danger"
          uib-tooltip="{{terrItem.error.translated_message||terrItem.error.message}}"
          tooltip-placement="right" tooltip-append-to-body="true"></i>
        </li>
        <li ng-if="terr.length > 10">...</li>

      </ul>
    </div>

    <div ng-if='!terr || terr.length==0' class="text-success">
     <i class="fa fa-check text-success"></i>
      <!-- 提交成功 -->
      {{'restoreModal.success'|translate}}
    </div>
 </div>



    <div class="clearfix"></div>
  </div>
  <div class="modal-footer">
    <button ng-if="step==1" type="submit" class="btn btn-success btn-sm">
      <i class="glyphicon glyphicon-ok"></i>
      <!-- 确定 -->
      {{'ok'|translate}}
    </button>

    <button ng-if="step==2" ng-disabled="isStop" type="button" class="btn btn-warning btn-sm" ng-click="stop()">
      <i class="glyphicon glyphicon-remove"></i>
      <!-- 停止 -->
      {{'stop'|translate}}
    </button>

    <button ng-if="step==3||step==1" type="button" class="btn btn-default btn-sm" ng-click="close()">
      <i class="glyphicon glyphicon-remove"></i>
      <!-- 关闭 -->
      {{'close'|translate}}
    </button>
  </div>
</form>
